<head>
    <title>
        
            A Note About Java Threads
        
    </title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="Çağlayan Demirci" />
    <!-- Begin Jekyll SEO tag v2.7.1 -->
<title>A Note About Java Threads | Çağlayan Demirci</title>
<meta name="generator" content="Jekyll v4.0.1" />
<meta property="og:title" content="A Note About Java Threads" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="I will take a look to this post if I need to a rare time like now that I need to write Java thread code. I hope it also be helpful for you." />
<meta property="og:description" content="I will take a look to this post if I need to a rare time like now that I need to write Java thread code. I hope it also be helpful for you." />
<link rel="canonical" href="http://localhost:4000/a-note-about-java-threads" />
<meta property="og:url" content="http://localhost:4000/a-note-about-java-threads" />
<meta property="og:site_name" content="Çağlayan Demirci" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-08-06T00:00:00+03:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="A Note About Java Threads" />
<script type="application/ld+json">
{"description":"I will take a look to this post if I need to a rare time like now that I need to write Java thread code. I hope it also be helpful for you.","headline":"A Note About Java Threads","dateModified":"2021-08-06T00:00:00+03:00","datePublished":"2021-08-06T00:00:00+03:00","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/a-note-about-java-threads"},"url":"http://localhost:4000/a-note-about-java-threads","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

    <link rel="stylesheet" href='/assets/css/main.css'>
    <link rel="stylesheet" href='/assets/css/jekyll-code-style.css'>
    <link rel="icon" href='assets/images/icon_round.png'>
    <link rel="apple-touch-icon" href='assets/images/icon1a.png' />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto+Mono&display=swap">
    <script type="text/javascript" src='assets/js/main.js'></script>
    <script type="text/javascript" src='assets/js/panel.js'></script>
    <script type="text/javascript" src='assets/js/put-code-elements.js'></script>
    <script type="text/javascript" src='assets/js/image-regulator.js'></script>
    <!-- MathJax library -->
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <!-- Chart.js library 
    <script type="text/javascript" src='https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.3/Chart.js'></script>
    <script type="text/javascript" src='https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.3/Chart.bundle.js'></script>
    <link rel="stylesheet" href='https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.3/Chart.css'>
    -->
</head>

<body>
    <div class="default_header"></div>
    <div class="panel_container">
    <div class="panel">
        <div class="cell" id="c1">
            <p id="nameOnPanel">Çağlayan Demirci <span id="page_def">. Personal Page</span></p>
            <p id="nameOnPhonePanel">cademirci</p>
            <div id="c1_pad">*</div>
        </div>
        <div class="cell" id="c2">
        </div>
        <span class="tooltip_returnTop">return top</span>
        <div class="cell" id="c3">
            
                <a class="navlink" href="blog">&larr; Blog</a>
            
        </div>
    </div>
    <div class="navbox">
        
            
                <a class="navlink" data-scroll-top='#about-me'>
                   <div class="navlink_div">
                      About <img src="../assets/images/42reok.png" class="nav_image">
                   </div>
                </a>
            
        
            
                <a class="navlink" data-scroll-top='#contact-me'>
                   <div class="navlink_div">
                      Contact <img src="../assets/images/icon_contact12.png" class="nav_image">
                   </div>
                </a>
            
        
            
        
            
                <a class="navlink" data-scroll-top='#blog'>
                   <div class="navlink_div">
                      Blog <img src="../assets/images/icon_blog.png" class="nav_image">
                   </div>
                </a>
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
    </div>
</div>
<div class="panel_pad"></div>

    <div class="reading_area">
        <div class="content_container">
            
            <h1>A Note About Java Threads</h1>
            <p class="excerpt-in-post">I will take a look to this post if I need to a rare time like now that I need to write Java thread code. I hope it also be helpful for you. </p>
            <div class="post_date">06.08.2021</div>
            <div class="post_tags">Java, general programming, non blocking systems, threads</div>
            <hr>
            <p><img src="https://steemitimages.com/DQmez3rvXydCsVKbaFQ5StXgWXF4bZyy4PEiPTXHiaA3uaz/4.png" alt="" /></p>

<p>I thought it is a brief time to write a Java Thread note down to my blog, so here we are.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">java.io.BufferedReader</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.FileReader</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.IOException</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Main</span> <span class="kd">extends</span> <span class="nc">Thread</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">int</span> <span class="n">columnNumber</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">double</span> <span class="n">max</span> <span class="o">=</span> <span class="mf">0.0</span><span class="o">,</span> <span class="n">sum</span> <span class="o">=</span> <span class="mf">0.0</span><span class="o">;</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="nc">String</span> <span class="n">fileName</span> <span class="o">=</span> <span class="s">""</span><span class="o">;</span>

  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">fileName</span> <span class="o">=</span> <span class="n">args</span><span class="o">[</span><span class="mi">0</span><span class="o">];</span>
    <span class="nc">String</span> <span class="n">aRow</span> <span class="o">=</span> <span class="n">readFile</span><span class="o">(</span><span class="n">fileName</span><span class="o">).</span><span class="na">split</span><span class="o">(</span><span class="s">"\n"</span><span class="o">)[</span><span class="mi">0</span><span class="o">].</span><span class="na">replaceAll</span><span class="o">(</span><span class="s">"\\s{2,}"</span><span class="o">,</span> <span class="s">" "</span><span class="o">).</span><span class="na">trim</span><span class="o">();</span>
    <span class="c1">// replaceAll("\\s{2,}", " ").trim() is a sweet thing. It erases extra whitespaces</span>
    <span class="c1">// and converts them into single ones. It is a big simplification for the jobs</span>
    <span class="c1">// where inappropriate data like absurd text files were given. </span>

    <span class="kt">int</span> <span class="n">columnCount</span> <span class="o">=</span> <span class="n">aRow</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">-</span> <span class="n">aRow</span><span class="o">.</span><span class="na">replaceAll</span><span class="o">(</span><span class="s">" "</span><span class="o">,</span> <span class="s">""</span><span class="o">).</span><span class="na">length</span><span class="o">()</span> <span class="o">+</span> <span class="mi">1</span><span class="o">;</span>
    <span class="c1">// that means if there are 3 whitespaces in a row, it has 4 elements </span>
    <span class="c1">// like "12 9 42 0"</span>

    <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">columnCount</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
      <span class="nc">Main</span> <span class="n">thread</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Main</span><span class="o">();</span>
      <span class="n">thread</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
      <span class="k">while</span><span class="o">(</span><span class="n">thread</span><span class="o">.</span><span class="na">isAlive</span><span class="o">())</span> <span class="o">{</span>
        <span class="c1">// do nothing, just wait.</span>
      <span class="o">}</span>
    <span class="o">}</span>
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"max number: "</span> <span class="o">+</span> <span class="n">trimFloats</span><span class="o">(</span><span class="n">max</span><span class="o">));</span>
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"sum of the matrix: "</span> <span class="o">+</span> <span class="n">trimFloats</span><span class="o">(</span><span class="n">sum</span><span class="o">));</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span class="o">{</span>
    <span class="nc">String</span><span class="o">[]</span> <span class="n">rows</span> <span class="o">=</span> <span class="n">readFile</span><span class="o">(</span><span class="n">fileName</span><span class="o">).</span><span class="na">split</span><span class="o">(</span><span class="s">"\n"</span><span class="o">);</span>
    <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">rows</span><span class="o">.</span><span class="na">length</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
      <span class="nc">String</span> <span class="n">currentRow</span> <span class="o">=</span> <span class="n">rows</span><span class="o">[</span><span class="n">i</span><span class="o">].</span><span class="na">replaceAll</span><span class="o">(</span><span class="s">"\\s{2,}"</span><span class="o">,</span> <span class="s">" "</span><span class="o">).</span><span class="na">trim</span><span class="o">();</span>
      <span class="nc">String</span><span class="o">[]</span> <span class="n">numbersInARow</span> <span class="o">=</span> <span class="n">currentRow</span><span class="o">.</span><span class="na">split</span><span class="o">(</span><span class="s">" "</span><span class="o">);</span>
      <span class="kt">double</span> <span class="n">currentNumber</span> <span class="o">=</span> <span class="nc">Double</span><span class="o">.</span><span class="na">parseDouble</span><span class="o">(</span><span class="n">numbersInARow</span><span class="o">[</span><span class="n">columnNumber</span><span class="o">]);</span>
      <span class="k">if</span> <span class="o">(</span><span class="n">max</span> <span class="o">&lt;</span> <span class="n">currentNumber</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">max</span> <span class="o">=</span> <span class="n">currentNumber</span><span class="o">;</span>
      <span class="o">}</span>
      <span class="n">sum</span> <span class="o">+=</span> <span class="n">currentNumber</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="n">columnNumber</span><span class="o">++;</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="kd">static</span> <span class="nc">String</span> <span class="nf">readFile</span><span class="o">(</span><span class="nc">String</span> <span class="n">fileName</span><span class="o">)</span> <span class="o">{</span>
    <span class="nc">BufferedReader</span> <span class="n">reader</span><span class="o">;</span>
    <span class="nc">String</span> <span class="n">fileContent</span> <span class="o">=</span> <span class="s">""</span><span class="o">,</span> <span class="n">line</span> <span class="o">=</span> <span class="s">""</span><span class="o">;</span>
    <span class="k">try</span> <span class="o">{</span>
      <span class="n">reader</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">BufferedReader</span><span class="o">(</span><span class="k">new</span> <span class="nc">FileReader</span><span class="o">(</span><span class="n">fileName</span><span class="o">));</span>
      <span class="k">while</span> <span class="o">((</span><span class="n">line</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="na">readLine</span><span class="o">())</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">fileContent</span> <span class="o">+=</span> <span class="n">line</span> <span class="o">+</span> <span class="s">"\n"</span><span class="o">;</span>
      <span class="o">}</span>
      <span class="n">reader</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
    <span class="o">}</span> <span class="k">catch</span><span class="o">(</span><span class="nc">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
    <span class="o">}</span> 
    <span class="k">return</span> <span class="n">fileContent</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="kd">static</span> <span class="nc">String</span> <span class="nf">trimFloats</span><span class="o">(</span><span class="kt">double</span> <span class="n">number</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">number</span> <span class="o">%</span> <span class="mi">1</span> <span class="o">==</span> <span class="mf">0.0</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">return</span> <span class="s">""</span> <span class="o">+</span> <span class="o">(</span><span class="kt">int</span><span class="o">)</span> <span class="n">number</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="nc">String</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">"%.2f"</span><span class="o">,</span> <span class="n">number</span><span class="o">);</span>
  <span class="o">}</span>

<span class="o">}</span>
</code></pre></div></div>

<p>This code prints the sum of the numbers in a matrix which is given in a text file and finds the maximum number among them. The point is, it divides the matrix into threads (where thread number is #of columns) then compute them in different forks (threads).</p>

<p>Java threads are dangerous when we want to use attributes or global variables. I want that <code class="highlighter-rouge">columnNumber</code> to refer to current column of the matrix with an order 0, then 1, then 2… But if we miss the essence of threads, we may face a chaos like that while CPU is computing a column where suddenly another thread starts before the interpreter sees the <code class="highlighter-rouge">columnNumber++</code>. Such an event comes up with computing the same columns at the same time.</p>

<p>In other -simple- words: it is not certain that java goes exactly “0 1 2” (we want this), or like “0 1 1”, “1 2 2”.</p>

<p>In order to avoid that, we can simply add <code class="highlighter-rouge">isAlive()</code> method in an empty loop like below.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">while</span> <span class="o">(</span><span class="n">thread</span><span class="o">.</span><span class="na">isAlive</span><span class="o">())</span> <span class="o">{</span>
  <span class="c1">// do nothing, just wait.</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Additionally, this is also related to the answer of why do we prefer modern non-blocking (by default) systems like NodeJS or how does threads work in such systems. This is the topic of an another article.</p>

        </div>
    </div>
    <div class="share_phrase">
        <p>Share this post?</p>
    </div>
    <div class="a2a_kit a2a_kit_size_32" data-a2a-icon-color="#1a1a1a">
        <!--<a class="a2a_dd" href="https://www.addtoany.com/share"></a>-->
        <div class="share_button" id="sb_whatsapp"><a class="a2a_button_whatsapp"></a></div>
        <div class="share_button" id="sb_gmail"><a class="a2a_button_google_gmail"></a></div>
        <div class="share_button" id="sb_twitter"><a class="a2a_button_twitter"></a></div>
        <div class="share_button" id="sb_facebook"><a class="a2a_button_facebook"></a></div>
        <div class="share_button" id="sb_linkedin"><a class="a2a_button_linkedin"></a></div>
        <div class="share_button" id="sb_reddit"><a class="a2a_button_reddit"></a></div>
    </div>
    <script async src="https://static.addtoany.com/menu/page.js"></script>
    <div class="footer_container">
    <div class="footer_content">
        <div class="">
        </div>
        <div class="">
            <div class="social_media_bar">
                <a href="https://github.com/cademirci" target="_blank"><img src="/assets/images/icon_git.png" class="social_media_icon"></a>
                <a href="https://www.linkedin.com/in/%C3%A7a%C4%9Flayan-demirci-741a14199/" target="_blank"><img src="/assets/images/icon_lin.png" class="social_media_icon"></a>
                <a href="https://twitter.com/cademirci" target="_blank"><img src="/assets/images/icon_twi.png" class="social_media_icon"></a>
                <a href="https://www.instagram.com/cademirci/" target="_blank"><img src="/assets/images/icon_ins.png" class="social_media_icon"></a>
                <a href="https://open.spotify.com/user/%C3%A7a%C4%9Flayan?si=TpgH3E7fS3e--nEN-WExcg" target="_blank"><img src="/assets/images/icon_spo.png" class="social_media_icon"></a>
            </div>
            <div class="footer_text">
                <p>
                    Designed and coded my own <a href="https://github.com/cademirci/cademirci.github.io">open source</a> website under <br>
                    2018 - 2021 GitHub. Feel free to inspect.
                </p>
                <!--<p><a href="/changelog">&rarr; log</a></p>-->
                <div class="signature">
                    <p><img src='assets/images/icon_.png' alt=""></p>
                    <p class="signature">Çağlayan Demirci</p>
                </div>
            </div>
        </div>
    </div>
</div>

</body>

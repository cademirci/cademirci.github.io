<head>
    <title>
        
            A Web Application With World Map
        
    </title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="Çağlayan Demirci" />
    <!-- Begin Jekyll SEO tag v2.7.1 -->
<title>A Web Application With World Map | Çağlayan Demirci</title>
<meta name="generator" content="Jekyll v4.0.1" />
<meta property="og:title" content="A Web Application With World Map" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="About a web application I wrote that allows you to mark with a pin somewhere on an open world map, put a photo and a text related with there and the memory." />
<meta property="og:description" content="About a web application I wrote that allows you to mark with a pin somewhere on an open world map, put a photo and a text related with there and the memory." />
<link rel="canonical" href="http://localhost:4000/a-web-application-with-world-map" />
<meta property="og:url" content="http://localhost:4000/a-web-application-with-world-map" />
<meta property="og:site_name" content="Çağlayan Demirci" />
<meta property="og:image" content="https://raw.githubusercontent.com/cademirci/been-and-mark/master/screenshots/map.png" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2020-03-25T00:00:00+03:00" />
<meta name="twitter:card" content="summary_large_image" />
<meta property="twitter:image" content="https://raw.githubusercontent.com/cademirci/been-and-mark/master/screenshots/map.png" />
<meta property="twitter:title" content="A Web Application With World Map" />
<script type="application/ld+json">
{"description":"About a web application I wrote that allows you to mark with a pin somewhere on an open world map, put a photo and a text related with there and the memory.","headline":"A Web Application With World Map","dateModified":"2020-03-25T00:00:00+03:00","datePublished":"2020-03-25T00:00:00+03:00","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/a-web-application-with-world-map"},"url":"http://localhost:4000/a-web-application-with-world-map","image":"https://raw.githubusercontent.com/cademirci/been-and-mark/master/screenshots/map.png","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

    <link rel="stylesheet" href='/assets/css/main.css'>
    <link rel="stylesheet" href='/assets/css/jekyll-code-style.css'>
    <link rel="icon" href='assets/images/icon_round.png'>
    <link rel="apple-touch-icon" href='assets/images/icon1a.png' />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto+Mono&display=swap">
    <script type="text/javascript" src='assets/js/main.js'></script>
    <script type="text/javascript" src='assets/js/panel.js'></script>
    <script type="text/javascript" src='assets/js/put-code-elements.js'></script>
    <script type="text/javascript" src='assets/js/image-regulator.js'></script>
    <!-- MathJax library -->
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <!-- Chart.js library 
    <script type="text/javascript" src='https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.3/Chart.js'></script>
    <script type="text/javascript" src='https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.3/Chart.bundle.js'></script>
    <link rel="stylesheet" href='https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.3/Chart.css'>
    -->
</head>

<body>
    <div class="default_header"></div>
    <div class="panel_container">
    <div class="panel">
        <div class="cell" id="c1">
            <p id="nameOnPanel">Çağlayan Demirci <span id="page_def">. Personal Page</span></p>
            <p id="nameOnPhonePanel">cademirci</p>
            <div id="c1_pad">*</div>
        </div>
        <div class="cell" id="c2">
        </div>
        <span class="tooltip_returnTop">return top</span>
        <div class="cell" id="c3">
            
                <a class="navlink" href="blog">&larr; Blog</a>
            
        </div>
    </div>
    <div class="navbox">
        
            
                <a class="navlink" data-scroll-top='#about-me'>
                   <div class="navlink_div">
                      About <img src="../assets/images/42reok.png" class="nav_image">
                   </div>
                </a>
            
        
            
                <a class="navlink" data-scroll-top='#contact-me'>
                   <div class="navlink_div">
                      Contact <img src="../assets/images/icon_contact12.png" class="nav_image">
                   </div>
                </a>
            
        
            
        
            
                <a class="navlink" data-scroll-top='#blog'>
                   <div class="navlink_div">
                      Blog <img src="../assets/images/icon_blog.png" class="nav_image">
                   </div>
                </a>
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
    </div>
</div>
<div class="panel_pad"></div>

    <div class="reading_area">
        <div class="content_container">
            
            <h1>A Web Application With World Map</h1>
            <p class="excerpt-in-post">About a web application I wrote that allows you to mark with a pin somewhere on an open world map, put a photo and a text related with there and the memory.</p>
            <div class="post_date">25.03.2020</div>
            <div class="post_tags">Django, Leaflet.js, Python, back-end, web app</div>
            <hr>
            <p>I wrote a web application called <em>been-and-mark</em>, I explained it on Github:</p>

<blockquote>
  <p>been-and-mark application allows you to mark with a pin somewhere you have been on an open world map; put a photo and a text related with there and the memory. <br /><br />In this respect, it can be thought as some kind of very simple Foursquare clone. Only been-and-mark is written for personal usage, like a blog or a diary let’s say. I have written a web application with an interactive map in my internship; then I wanted to rewrite and put a simpler and joyful version of it into Github, as a self development. Plus this is a totally different idea actually.</p>
</blockquote>

<p><img src="https://raw.githubusercontent.com/cademirci/been-and-mark/master/screenshots/map.png" alt="" /></p>

<p>I want to write my falses down here. Let it be a little documentation: I will write about alternatives, mistakes and right things I have made.</p>

<hr />

<h3 id="djangogeodjango">Django/GeoDjango</h3>

<p>I used Django as back-end framework. Actually, for my exact purpose, there is a django version called <a href="https://realpython.com/location-based-app-with-geodjango-tutorial/">GeoDjango</a> which allows you to make open world map applications. PostGIS/PosgreSQL is recommended as database with it, thus spatial model fields can be used like <code class="highlighter-rouge">PointField</code>, <code class="highlighter-rouge">PolygonField</code> and <code class="highlighter-rouge">GeometryField</code>. In this way I could use a single <code class="highlighter-rouge">point</code> in my json data (it is also called geoJson in such a project) to show a point on the map, which means using data that hold <code class="highlighter-rouge">latitude</code> and <code class="highlighter-rouge">longitude</code> at a single time. I thought that is unnecessary. Reasons:</p>

<p>PostgreSQL is extremely large and powerful database management system that requires Docker. May be Docker is a good thing, but I was trying to a simple, personal application at the moment. If I will supposed to work on a company-level, interactive, huge map application, I may use GeoDjango and PostgreSQL, accepted. But I just intended to learn some Django at the moment, not such a great deal.</p>

<p>Sometimes, it is better that make things simple. Django does not provide <code class="highlighter-rouge">pointField</code> that holds a world point coordinates. If so, then I figure it out with this way: can be hold that two data instead of PointField: these are two <code class="highlighter-rouge">FloatField</code>s one of them holding <code class="highlighter-rouge">latitude</code>, and <code class="highlighter-rouge">longitude</code> the other does. And done.</p>

<h3 id="map">Map</h3>

<p>After a back-end framework that can serve a map management system, you need a map management system which allows you to manage map and map items like pin, field, pin popups and things like that. I found and thought to use <a href="https://developers.google.com/maps/documentation">Google Maps Platform</a> first. You have to get an API key and a billing account for using GMP. Then while keep searching, I found an open source JavaScript library called <a href="https://leafletjs.com/">Leafletjs</a> and I decided to use it instead of Google’s API.</p>

<h3 id="communication-between-django-and-leaflet">Communication Between Django and Leaflet</h3>

<p>At the end, in my HTML templates, I run a Django Jinja for loop and geoJson object within, all of them framed with Leaflet JavaScript code:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="o">%</span> <span class="k">for</span> <span class="nx">point</span> <span class="k">in</span> <span class="nx">points</span> <span class="o">%</span><span class="p">}</span>
<span class="c1">// points is an array holds Django database model "Place"</span>
  <span class="dl">"</span><span class="s2">geometry</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Point</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">coordinates</span><span class="dl">"</span><span class="p">:</span> <span class="p">[</span>
      <span class="p">{{</span> <span class="nx">point</span><span class="p">.</span><span class="nx">longitude</span> <span class="p">}},</span>
      <span class="c1">// it can look like a reverse order but it works that way.</span>
      <span class="p">{{</span> <span class="nx">point</span><span class="p">.</span><span class="nx">latitude</span> <span class="p">}}</span>
    <span class="p">]</span>
  <span class="p">}</span>
<span class="p">{</span><span class="o">%</span> <span class="nx">endfor</span> <span class="o">%</span><span class="p">}</span>
</code></pre></div></div>

<p>I could not find a way for writing and using Django variables (I mean Jinja template variables) inside external JavaScript files or a Json file. I think the reason is that I do not use any frontend framework organizes such things. I wrote almost everything related with JavaScript down in <code class="highlighter-rouge">template</code> files. May be it became a little dirty code. By the way this is the same reason that it seems in the GitHub repository of my project the second most used language after python is HTML. Actually they are not HTML, almost all of them are JavaScript of Leaflet library in Jinja blocks.</p>

<h3 id="a-bug-i-could-not-handle">A Bug I Could Not Handle</h3>

<p>I do not like force the user to do something I provide. Provision should be used as an addition, a better way. Not an obligation. I wrote a feature that the pins on the map can keep an image, a photograph alongside the text. My <code class="highlighter-rouge">add-new-place</code> page screenshot is given below:</p>

<p><img src="https://raw.githubusercontent.com/cademirci/been-and-mark/master/screenshots/add-new-place.png" alt="" /></p>

<p>The user is about to enter a pin keeping a Coffee Shop. They may does not want to add a photo about here, but as can be seem, the input filed <code class="highlighter-rouge">Image</code> forces him/her to browse an image, otherwise the record will not be added into the database. To avoid that, my Django model is created with attributes such <code class="highlighter-rouge">null=True</code> and a default value:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">image</span> <span class="o">=</span> <span class="n">models</span><span class="p">.</span><span class="n">ImageField</span><span class="p">(</span> <span class="n">default</span><span class="o">=</span><span class="s">"/place_pictures/iconbl.png"</span><span class="p">,</span>
                           <span class="n">upload_to</span><span class="o">=</span><span class="s">"place_pictures"</span><span class="p">,</span>
                           <span class="n">null</span><span class="o">=</span><span class="bp">True</span> <span class="p">)</span>
</code></pre></div></div>

<p>That means you can leave it empty, in this case the field will be filled by <code class="highlighter-rouge">iconbl.png</code> which is a notebook image I drawed which represents this is not a graphical memory, it contains text only. <em>But this feature does not work</em>. I thought may be the reason of it that not python but HTML forces the user to fill the field. In this way I would use <code class="highlighter-rouge">default value</code> attribute of HTML. But this should be nonsense in the first place, because <code class="highlighter-rouge">form</code> fields are being initialized by python itself, because I use Django Jinja’s <code class="highlighter-rouge">{{ form }}</code> tool in my HTML template. Another absurd thing about this situation, is that I can leave the filed empty in my admin page (django administration), but the same framework does not allow me to leave the field empty in its own form templates.</p>

<p>Current program forces the user to put an image to all of the pins, unless they do not create and use an admin account. In this point, I am explaining how to use an admin account.</p>

<h3 id="use-the-app-as-an-admin">Use the App as an Admin</h3>

<p>Django administration is easy to use. I already wrote the admin urlpattern, a user just should do the following bellow:</p>

<div class="language-terminal highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">python manage.py createsuperuser
</span></code></pre></div></div>

<p>Then create an account. Finally type in the browser url bar that <code class="highlighter-rouge">localhost:8000/admin</code>. The app can be managed from there.</p>

        </div>
    </div>
    <div class="share_phrase">
        <p>Share this post?</p>
    </div>
    <div class="a2a_kit a2a_kit_size_32" data-a2a-icon-color="#1a1a1a">
        <!--<a class="a2a_dd" href="https://www.addtoany.com/share"></a>-->
        <div class="share_button" id="sb_whatsapp"><a class="a2a_button_whatsapp"></a></div>
        <div class="share_button" id="sb_gmail"><a class="a2a_button_google_gmail"></a></div>
        <div class="share_button" id="sb_twitter"><a class="a2a_button_twitter"></a></div>
        <div class="share_button" id="sb_facebook"><a class="a2a_button_facebook"></a></div>
        <div class="share_button" id="sb_linkedin"><a class="a2a_button_linkedin"></a></div>
        <div class="share_button" id="sb_reddit"><a class="a2a_button_reddit"></a></div>
    </div>
    <script async src="https://static.addtoany.com/menu/page.js"></script>
    <div class="footer_container">
    <div class="footer_content">
        <div class="">
        </div>
        <div class="">
            <div class="social_media_bar">
                <a href="https://github.com/cademirci" target="_blank"><img src="/assets/images/icon_git.png" class="social_media_icon"></a>
                <a href="https://www.linkedin.com/in/%C3%A7a%C4%9Flayan-demirci-741a14199/" target="_blank"><img src="/assets/images/icon_lin.png" class="social_media_icon"></a>
                <a href="https://twitter.com/cademirci" target="_blank"><img src="/assets/images/icon_twi.png" class="social_media_icon"></a>
                <a href="https://www.instagram.com/cademirci/" target="_blank"><img src="/assets/images/icon_ins.png" class="social_media_icon"></a>
                <a href="https://open.spotify.com/user/%C3%A7a%C4%9Flayan?si=TpgH3E7fS3e--nEN-WExcg" target="_blank"><img src="/assets/images/icon_spo.png" class="social_media_icon"></a>
            </div>
            <div class="footer_text">
                <p>
                    Designed and coded my own <a href="https://github.com/cademirci/cademirci.github.io">open source</a> website under <br>
                    2018 - 2021 GitHub. Feel free to inspect.
                </p>
                <!--<p><a href="/changelog">&rarr; log</a></p>-->
                <div class="signature">
                    <p><img src='assets/images/icon_.png' alt=""></p>
                    <p class="signature">Çağlayan Demirci</p>
                </div>
            </div>
        </div>
    </div>
</div>

</body>

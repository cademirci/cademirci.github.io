<html>
	<head>
		<meta charset="UTF-8">
		<meta content='width=device-width, initial-scale=1' name='viewport'/>
		<link rel="stylesheet" type="text/css" href="{{ site.baseurl }}css_files/gameStyle.css">
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
	</head>
	<body onload="game()">
		<div class="board" id="gameBoard">
			<div class="user" id="gamer"></div>
		</div>
		<div class="scoreBoard">
			<p> SCORE: <span id="score"></span></p>
			<p> LIFE: <span id="life"></span></p>
		</div>
		<script>
document.getElementById("life").innerHTML = 3;
document.getElementById("score").innerHTML = 0;
document.addEventListener("keydown", keyPush);
var ele = document.getElementById("gamer");
pos = 20;
function keyPush(event) {
	switch (event.keyCode) {
		case 37: goLeft();
			break;
		case 39: goRight();
			break;
		case 38:
			$("#gameBoard").append("<div id=\"bullet\"></div>");
		   fire();
			break;
	}
}
function goLeft() {
	if (pos == 20)
		pos += 20;
	pos -= 20;
	ele.style.left = pos + "px";
}
function goRight() {
	if (pos == 920)
		pos -= 20;
	pos += 20;
	ele.style.left = pos + "px";
}

var bulletY = 575;
var bulletX = 0;
function fire() {
	bulletX = pos + 25;
	var bullet = document.getElementById("bullet");
	bullet.style.left = bulletX + "px";
	bulletY = 575;
	bullet.style.top = bulletY + "px";
	var move = setInterval(bulletMove, 5);
	function bulletMove() {
		bulletY-=5;
		bullet.style.top = bulletY + "px";
		if (bulletY == 0) {
			$("#bullet").remove();
			clearInterval(move);
			bulletY = 575;
		}
	}
}

var score = 0;
var life = 3;
function game() {
	$("#gameBoard").append("<div id=\"block\"></div>");
	var block = document.getElementById("block");
	var eX = Math.random()*900 + 50;
	var enemyX = eX + "px";
	block.style.left = enemyX;
	var enemyY = 0;
	var move = setInterval(enemyMove, 5);
	function enemyMove() {
		enemyY++;
		block.style.top = enemyY + "px";
		if (enemyY >= 630) {
			$("block").remove();
			clearInterval(move);
			life--;
			document.getElementById("life").innerHTML = life;
			game();
			if (life == 0) {
				window.alert("GAME OVER");
			}
		}
		if (bulletX > eX && enemyY > bulletY &&
			 bulletX < eX + 20) { // && enemyY > bulletY
			$("block").remove();
			clearInterval(move);
			score++;
			document.getElementById("score").innerHTML = score;
			game();
		}
	}
}

		</script>
	</body>
</html>
